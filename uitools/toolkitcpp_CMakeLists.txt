#[[ Copyright 2012-2024 Esri
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#]]

#[[ QMAKE: include($$PWD/common.pri)]]
include(${CMAKE_CURRENT_LIST_DIR}/common_CMakeLists.txt)

#[[ QMAKE: QT += quickcontrols2 webview svg]]
find_package(Qt6 COMPONENTS QuickControls2 WebView Svg)

#[[ QMAKE: REGISTERPATH = $$PWD/register/Esri/ArcGISRuntime/Toolkit]]
set(REGISTERPATH ${CMAKE_CURRENT_LIST_DIR}/register/Esri/ArcGISRuntime/Toolkit)

#[[ QMAKE: INCLUDEPATH += $$PWD/register $$REGISTERPATH]]
include_directories(${CMAKE_CURRENT_LIST_DIR}/register ${REGISTERPATH})

#[[ QMAKE: HEADERS += $$REGISTERPATH/register.h \
           $$REGISTERPATH/internal/register_cpp.h]]
list(APPEND HEADERS ${REGISTERPATH}/register.h
    ${REGISTERPATH}/internal/register_cpp.h)

#[[ QMAKE: SOURCES += $$REGISTERPATH/register.cpp \
           $$REGISTERPATH/internal/register_cpp.cpp]]
list(APPEND HEADERS ${REGISTERPATH}/register.cpp
    ${REGISTERPATH}/internal/register_cpp.cpp)

#[[ QMAKE: RESOURCES += \
  $$PWD/images/esri_arcgisruntime_toolkit_images.qrc \
  $$PWD/import/Esri/ArcGISRuntime/Toolkit/esri_arcgisruntime_toolkit_view.qrc]]
set (RESOURCE_FILES
    ${CMAKE_CURRENT_LIST_DIR}/images/esri_arcgisruntime_toolkit_images.qrc
    ${CMAKE_CURRENT_LIST_DIR}/import/Esri/ArcGISRuntime/Toolkit/esri_arcgisruntime_toolkit_view.qrc
)

#[[ QMAKE: QML_IMPORT_PATH += $$PWD/import]]
set(QML_IMPORT_PATH ${CMAKE_CURRENT_LIST_DIR}/import CACHE STRING "" FORCE)

#[[ QMAKE: DEFINES += CPP_ARCGISRUNTIME_TOOLKIT]]
add_definitions(-DCPP_ARCGISRUNTIME_TOOLKIT)

# Expose the QML directory's path so that it can be added to the import path in src/main.cpp
add_definitions(-DArcGISRuntime_Toolkit_Qml_DIR="${CMAKE_CURRENT_LIST_DIR}/import")

# These commands are run implicitly as part of the qmake commands above
qt_add_library(ArcGISToolkit STATIC ${HEADERS} ${SOURCES} ${RESOURCE_FILES})
target_link_libraries(ArcGISToolkit PRIVATE
    Qt6::QuickControls2
    Qt6::WebView
    Qt6::Svg
    ArcGISRuntime::Cpp)  #(This should be installed in the CMakeLists.txt that calls this one)
